!function(p){"undefined"!=typeof wcpbc_setup_wizard_params&&(p.fn.wcpbc_setup_wizard=function(){var i="",c=this;function t(){i=function(){let t=!1,e=!1;return 1<window.location.hash.length&&(t=window.location.hash.substring(1)),e=t&&c.find("[data-step="+t+"]").length?t:c.find("[data-step]").first().data("step")}(),o()}function s(){return c.find("[data-step="+i+"]")}function o(){c.find("[data-step]").hide(),s().show()}function e(t){const e=t.closest("div[data-step]");var n=e.data("step");const a=t.serializeArray();a.push({name:"action",value:"wcpbc_setup_wizard_process_step"},{name:"security",value:wcpbc_setup_wizard_params.security},{name:"step",value:n}),c.find(".wcpbc-setup-wizard-notice").remove(),p("#wcpbc-setup-wizard-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),p.ajax({type:"POST",url:ajaxurl,data:p.param(a),success:function(t){var e;t.success?(i=s().next("[data-step]").data("step"),e=window.location.toString().split("#")[0],history.pushState({step:i},"",e+"#"+i),o()):t.data.forEach(function(t){{const n=wp.template("wcpbc-setup-wizard-notice");var e=n(t);return void c.find(".wcpbc-input-container.-container-"+t.code).prepend(e)}})},complete:function(){p("#wcpbc-setup-wizard-content").unblock()}}).fail(function(t){window.console.log(t)})}t(),o(),this.on("submit","form",function(t){t.preventDefault(),e(p(this))}),this.on("click",".wcpbc-setup-wizard-notice .wcpbc-setup-wizard-notice-dismiss",function(t){t.preventDefault(),p(this).closest(".wcpbc-setup-wizard-notice").fadeOut()}),window.addEventListener("popstate",function(){t(),o()})},p.fn.wcpbc_true_false=function(){function e(t){var e=t.attr("href"),e="yes"===p(e).val()?"enabled":"disabled";t.find("span.wcpbc-input-toggle").removeClass("-input-toggle--enabled").removeClass("-input-toggle--disabled").addClass("-input-toggle--"+e)}return this.each(function(){p(this).on("click",function(t){t.preventDefault();t=p(this).attr("href");value="yes"==p(t).val()?"no":"yes",p(t).val(value),e(p(this)),p(t).trigger("change")}),e(p(this))}),this},p('.wcpbc-input-container.-container-true-false>a[role="switch"]').wcpbc_true_false(),p("#wcpbc-setup-wizard-content").wcpbc_setup_wizard())}(jQuery,ajaxurl);